(this["webpackJsonpfood-app"]=this["webpackJsonpfood-app"]||[]).push([[0],{153:function(e,a,t){},189:function(e,a,t){e.exports=t.p+"static/media/undraw_breakfast_psiw.036328e2.svg"},233:function(e,a,t){e.exports=t(379)},238:function(e,a,t){e.exports=t.p+"static/media/logo.2b788b00.svg"},239:function(e,a,t){},377:function(e,a,t){},379:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(25),c=t(12),l=t.n(c),i=(t(153),t(238),t(239),t(189)),u=t.n(i);var s=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:u.a,className:"background"}),r.a.createElement("img",{src:"http://www.pngmart.com/files/1/Pepperoni-Pizza.png",className:"App-logo",alt:"logo"})))},m=t(15),p=t(209),d=t(192),g=t.n(d),h=t(413),f=t(418),b=t(417),E=t(415),v=t(191),y=t.n(v),O=t(17),j=function(e){return{type:"SET_USER",payload:e}},w="AIzaSyA_AgvelG6PC-CULXqk-_iCUITOYwvp3Og",k=("https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/textsearch/json?query=restaurants+near+Brooklyn%20NY%20USA&rankby=prominence&\n&key=".concat(w),function(e){return{type:"ADD_ORDER",payload:e}}),S=function(e){return{type:"GET_ORDER",payload:e}},C={addPlaceToProfile:function(e,a){return function(t){fetch("http://localhost:3000/restaurants",{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify({user_id:a,name:e.name,place_id:e.place_id})}).then((function(e){return e.json()})).then((function(e){console.log(e),t(k(e))}))}},getRestaurants:function(e){return function(a){fetch("https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/details/json?placeid=".concat(e,"&key=").concat(w)).then((function(e){return e.json()})).then((function(e){a(k(e.results[0]))}))}},getPlace:function(e){return function(a){fetch("https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/textsearch/json?query=restaurants+near+".concat(e,"&rankby=prominence&\n  &key=").concat(w)).then((function(e){return e.json()})).then((function(e){a({type:"GET_PLACE",payload:e.results})}))}},addPlace:function(e){return{type:"ADD_PLACE",payload:e}},getQuery:function(e){return{type:"GET_QUERY",payload:e}},fetchQuery:function(e){return{type:"FETCH_QUERY",payload:e}},newUserToDB:function(e){return function(a){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch("http://localhost:3000/users",t).then((function(e){return e.json()})).then((function(e){a(j(e.user)),localStorage.setItem("token",e.token)}))}},deleteUserFromDB:function(e){return function(a){var t;fetch((t=e,"http://localhost:3000/users/"+t),{method:"DELETE"}).then((function(e){a({type:"CLEAR_USER"}),localStorage.clear()}))}},loginUserToDB:function(e){return function(a){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch("http://localhost:3000/login",t).then((function(e){return e.json()})).then((function(e){e.error&&(console.log("errooor"),alert("incorrect login")),a(j(e.user)),a(S(e.user.restaurants)),localStorage.setItem("token",e.token)})).catch((function(e){return console.log("error")}))}},persistUser:function(){return function(e){var a={method:"GET",headers:{Authorization:"bearer "+localStorage.token}};fetch("http://localhost:3000/persist",a).then((function(e){return e.json()})).then((function(a){e(j(a))}))}},logoutUser:function(){return function(e){e({type:"CLEAR_USER"}),localStorage.clear()}}},x=t(381),_=Object(h.a)((function(e){return{toolbar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto"},toolbarLink:{padding:e.spacing(1),flexShrink:0}}}));function P(e){var a=_(),t=(e.sections,e.title,Object(O.d)((function(e){return e.login.username}))),n=Object(O.d)((function(e){return e.login}));console.log(n.username);var c=t?r.a.createElement("h2",null,t):null,l=Object(O.c)();console.log(localStorage);var i=t?r.a.createElement("div",null,r.a.createElement(o.b,{to:"/profile"},r.a.createElement(E.a,null,r.a.createElement(y.a,null))),r.a.createElement(o.b,{to:"/"},r.a.createElement(b.a,{variant:"outlined",size:"small",onClick:function(){l(C.logoutUser())}},"Logout"))):r.a.createElement("div",null,r.a.createElement(o.b,{to:"/login"},r.a.createElement(b.a,{variant:"outlined",size:"small"},"Login")));return console.log(t),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{className:a.toolbar},r.a.createElement(b.a,{size:"small"},r.a.createElement(p.a,null)),r.a.createElement(x.a,{component:"h2",variant:"h5",color:"inherit",align:"center",noWrap:!0,className:a.toolbarTitle},r.a.createElement("div",{className:"title"},r.a.createElement(o.b,{style:{textDecoration:"none",color:"black"},to:"/startpage"}," ",r.a.createElement(g.a,null)," FoodApp"))),c||"",i))}var A=t(53),R=t(68),N=t(55),D=t(430),U=t(420),T=t(423),L=t(422),I=t(427),q=t(421),F=t(424),z=t(419),Q=t(69),W=t.n(Q);var B=Object(h.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/1600x900/?restaurants,food)",backgroundRepeat:"no-repeat",backgroundColor:"dark"===e.palette.type?e.palette.grey[900]:e.palette.grey[50],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),G=function(e){var a=B(),t=Object(O.c)(),c=Object(n.useState)({username:"",password:""}),l=Object(N.a)(c,2),i=l[0],u=l[1],s=Object(m.g)(),p=function(e){return u(Object(R.a)({},i,Object(A.a)({},e.target.name,e.target.value)))},d=i.username,g=i.password;return r.a.createElement(z.a,{container:!0,component:"main",className:a.root},r.a.createElement(U.a,null),r.a.createElement(z.a,{item:!0,xs:!1,sm:4,md:7,className:a.image}),r.a.createElement(z.a,{item:!0,xs:12,sm:8,md:5,component:q.a,elevation:6,square:!0},r.a.createElement("div",{className:a.paper},r.a.createElement(D.a,{className:a.avatar},r.a.createElement(W.a,null)),r.a.createElement(x.a,{component:"h1",variant:"h5"},"Log in"),r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),t(C.loginUserToDB(i)),s.push("/")}},r.a.createElement(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"login",label:"Login",name:"username",autoComplete:"login",value:d,onChange:p,autoFocus:!0}),r.a.createElement(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:g,onChange:p}),r.a.createElement(L.a,{control:r.a.createElement(I.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Log In"),r.a.createElement(z.a,{container:!0},r.a.createElement(z.a,{item:!0,xs:!0}),r.a.createElement(z.a,{item:!0},r.a.createElement(o.b,{to:"/signup",variant:"body2"},"Don't have an account? Sign Up"))),r.a.createElement(F.a,{mt:5})))))};var H=Object(h.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/1600x900/?food,restaurants)",backgroundRepeat:"no-repeat",backgroundColor:"dark"===e.palette.type?e.palette.grey[900]:e.palette.grey[50],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),V=function(e){var a=H(),t=Object(O.c)(),c=Object(n.useState)({username:"",password:""}),l=Object(N.a)(c,2),i=l[0],u=l[1],s=function(e){return u(Object(R.a)({},i,Object(A.a)({},e.target.name,e.target.value)))},p=Object(m.g)(),d=i.username,g=i.password;return r.a.createElement(z.a,{container:!0,component:"main",className:a.root},r.a.createElement(U.a,null),r.a.createElement(z.a,{item:!0,xs:!1,sm:4,md:7,className:a.image}),r.a.createElement(z.a,{item:!0,xs:12,sm:8,md:5,component:q.a,elevation:6,square:!0},r.a.createElement("div",{className:a.paper},r.a.createElement(D.a,{className:a.avatar},r.a.createElement(W.a,null)),r.a.createElement(x.a,{component:"h1",variant:"h5"},"Sign Up"),r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),t(C.newUserToDB(i)),p.push("/"),console.log({history:p})}},r.a.createElement(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:d,onChange:s}),r.a.createElement(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:g,onChange:s}),r.a.createElement(L.a,{control:r.a.createElement(I.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign Up"),r.a.createElement(z.a,{container:!0},r.a.createElement(z.a,{item:!0,xs:!0}),r.a.createElement(z.a,{item:!0},r.a.createElement(o.b,{to:"/login",variant:"body2"},"Already have an account? Log In"))),r.a.createElement(F.a,{mt:5})))))};var X=Object(h.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/1600x900/?restaurants,food)",backgroundRepeat:"no-repeat",backgroundColor:"dark"===e.palette.type?e.palette.grey[900]:e.palette.grey[50],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Y=function(e){var a=X(),t=Object(O.c)(),c=Object(n.useState)({username:"",password:""}),l=Object(N.a)(c,2),i=l[0],u=l[1],s=Object(m.g)(),p=function(e){return u(Object(R.a)({},i,Object(A.a)({},e.target.name,e.target.value)))},d=i.username,g=i.password;return r.a.createElement(z.a,{container:!0,component:"main",className:a.root},r.a.createElement(U.a,null),r.a.createElement(z.a,{item:!0,xs:!1,sm:4,md:7,className:a.image}),r.a.createElement(z.a,{item:!0,xs:12,sm:8,md:5,component:q.a,elevation:6,square:!0},r.a.createElement("div",{className:a.paper},r.a.createElement(D.a,{className:a.avatar},r.a.createElement(W.a,null)),r.a.createElement(x.a,{component:"h1",variant:"h5"},"Log in"),r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),t(C.loginUserToDB(i)),s.push("/")}},r.a.createElement(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"login",label:"Login",name:"username",autoComplete:"login",value:d,onChange:p,autoFocus:!0}),r.a.createElement(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:g,onChange:p}),r.a.createElement(L.a,{control:r.a.createElement(I.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Log In"),r.a.createElement(z.a,{container:!0},r.a.createElement(z.a,{item:!0,xs:!0}),r.a.createElement(z.a,{item:!0},r.a.createElement(o.b,{to:"/signup",variant:"body2"},"Don't have an account? Sign Up"))),r.a.createElement(F.a,{mt:5})))))},J=t(193),K=t(194),M=t(210),Z=t(208),$=t(195),ee=t.n($),ae=t(202),te=t(428),ne=function(e){Object(M.a)(t,e);var a=Object(Z.a)(t);function t(e){var n;return Object(J.a)(this,t),(n=a.call(this,e)).handleChange=function(e){n.setState({place:e}),console.log(e)},n.handleSelect=function(e,a){n.setState({place:e,encodedPlace:e})},n.handleSubmit=function(e){e.preventDefault();var a=n.state.place,t=n.state.encodedPlace,r=(encodeURI(a).replace(/,/g,""),encodeURI(t).replace(/,/g,""));n.setState({redirect:!0,encodedPlace:r})},n.state={place:"",encodedPlace:""},n}return Object(K.a)(t,[{key:"render",value:function(){return this.props.getQuery(this.state.encodedPlace),this.props.fetchQuery(this.state.encodedPlace),this.state.redirect?r.a.createElement(m.a,{push:!0,to:"/home"}):r.a.createElement("div",null,r.a.createElement(s,null),r.a.createElement("form",{className:"image",onSubmit:this.handleSubmit},r.a.createElement(ee.a,{value:this.state.place,onChange:this.handleChange,onSelect:this.handleSelect},(function(e){var a=e.getInputProps,t=e.suggestions,n=e.getSuggestionItemProps,o=e.loading;return r.a.createElement("div",{className:"image"},r.a.createElement(te.a,Object.assign({action:"search"},a({placeholder:"Search Location ...",className:"location-search-input"}))),r.a.createElement("div",{className:"autocomplete-dropdown-container"},o&&r.a.createElement("div",null,"Loading..."),t.map((function(e){var a=e.active?"suggestion-item--active":"suggestion-item",t=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return r.a.createElement("div",n(e,{className:a,style:t}),r.a.createElement("span",null,e.description))}))))}))))}}]),t}(r.a.Component),re=Object(ae.GoogleApiWrapper)({apiKey:"AIzaSyA_AgvelG6PC-CULXqk-_iCUITOYwvp3Og"})(ne),oe=C.addPlace,ce=C.getQuery,le=C.fetchQuery,ie=C.fetchPlace,ue=Object(O.b)(null,{addPlace:oe,getQuery:ce,fetchQuery:le,fetchPlace:ie})(re),se=t(72),me=t(48),pe=t(42);function de(){var e=Object(me.a)([void 0],['\n  width: 5.5em;\n  border-radius: 5px;\n\n  &::before {\n    content: "\\00a0";\n  }\n']);return de=function(){return e},e}function ge(){var e=Object(me.a)(["\n  display: inline-block;\n  height: 100%;\n  width: 100%;\n  background: linear-gradient(-90deg, #F0F0F0 0%, #F8F8F8 50%, #F0F0F0 100%);\n  background-size: 400% 400%;\n  animation: pulse 1.2s ease-in-out infinite;\n  @keyframes pulse {\n    0% {\n      background-position: 0% 0%;\n    }\n    100% {\n      background-position: -135% 0%;\n    }\n  }\n"]);return ge=function(){return e},e}function he(){var e=Object(me.a)(["\nmargin-top: 8px\n"]);return he=function(){return e},e}function fe(){var e=Object(me.a)(["\nbackground-color: #F6F6F6;\npadding: 4px 8px 0px 8px\ndisplay: inline-block\nmargin-top: 8px\nfont-size: 14px\n"]);return fe=function(){return e},e}function be(){var e=Object(me.a)(["\n\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    margin-left: 2rem;\n    margin-right: 2rem;\n"]);return be=function(){return e},e}function Ee(){var e=Object(me.a)(["\noverflow: hidden;\npadding: 0 0 32px;\nmargin-bottom: 2rem;\nwidth: 25rem;\nfont-family: Quicksand, arial, sans-serif;\n\nborder-radius: 5px;\n"]);return Ee=function(){return e},e}function ve(){var e=Object(me.a)(["\nobject-fit: cover;\nwidth: 100%;\nheight: 200px;\nmargin: auto;\n"]);return ve=function(){return e},e}function ye(){var e=Object(me.a)(["\n  color: #000000;\n  font-weight: 300;\n"]);return ye=function(){return e},e}pe.a.h2(ye()),pe.a.img(ve()),pe.a.li(Ee()),pe.a.ul(be()),pe.a.mark(fe()),pe.a.div(he());var Oe=pe.a.div(ge()),je=(Object(pe.a)(Oe)(de()),t(377),t(429)),we=t(426),ke=t(207),Se=t(431),Ce=function(){Object(O.c)(),Object(O.d)((function(e){return e.place})),Object(O.d)((function(e){return e.order}));var e=Object(n.useState)([]),a=Object(N.a)(e,2),t=a[0],o=a[1],c=Object(O.d)((function(e){return e.login.username})),l=Object(O.d)((function(e){return e.login.restaurants})),i=c||"no one",u="AIzaSyA_AgvelG6PC-CULXqk-_iCUITOYwvp3Og";Object(n.useEffect)((function(){m()}),[l]);var m=function(){var e=[];l.forEach((function(a){fetch("https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/details/json?placeid=".concat(a.place_id,"&key=").concat(u)).then((function(e){return e.json()})).then((function(t){console.log(a),e=[].concat(Object(se.a)(e),[t.result]),o(e)}))}))};return r.a.createElement("div",null,r.a.createElement(s,null),r.a.createElement("h1",{style:{textAlign:"center"}},i,"'s favorites"),r.a.createElement(je.a,{columns:3,divided:!0},r.a.createElement(je.a.Row,null,t.map((function(e){var a=e.photos?e.photos[0].photo_reference:"CmRaAAAAhITrIBjd8kRzu0ahi_XZAb32Skza-3DgpwLPabXm5iVZa26xPBdHcC2Keip0bpuUimsoG0wP_aECeM4wE8kc55Ebvjisca6bgsjh_OOjRtrjQRdDzVcpyEMPAub8AhcIEhBH40_RFwrYLiHhzyz-xKAGGhQAKLLb3VR7Hd9qSWV2H4O90Suxzg";return e.opening_hours&&e.opening_hours.open_now,r.a.createElement(je.a.Column,null,r.a.createElement(we.a,null,r.a.createElement(ke.a,{src:"https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&maxheight=200&photoreference=".concat(a,"&key=").concat(u)}),r.a.createElement(we.a.Content,null,r.a.createElement(we.a.Header,null,e.name),r.a.createElement(we.a.Description,null,"like")),r.a.createElement(we.a.Content,{extra:!0},r.a.createElement(Se.a,{icon:"star",defaultRating:e.rating,maxRating:5}))))})))))},xe=function(){var e=Object(O.d)((function(e){return{place:e.place,query:e.query,placeID:e.login.restaurants}})),a=Object(O.c)();return console.log(e.login),Object(n.useEffect)((function(){localStorage.token&&a(C.persistUser()),a(C.getPlace(e.query)),console.log(e.query)}),[e.query]),r.a.createElement("div",null,r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/login",render:function(){return r.a.createElement(G,null)}}),r.a.createElement(m.b,{path:"/signup",render:function(){return r.a.createElement(V,null)}}),r.a.createElement(m.b,{path:"/home",render:function(){return r.a.createElement(Y,null)}}),r.a.createElement(m.b,{path:"/profile",render:function(){return r.a.createElement(Ce,null)}}),r.a.createElement(m.b,{path:"/",render:function(){return r.a.createElement(ue,null)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _e=t(62),Pe=t(206),Ae=(t(378),{query:"dumbo"}),Re=Object(_e.c)({place:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"GET_PLACE":return n;case"ADD_PLACE":return[].concat(Object(se.a)(e),[n]);default:return e}},query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"FETCH_QUERY":return n;default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{restaurants:[]},a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"SET_USER":return n;case"CLEAR_USER":return{};default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"GET_ORDER":return n;case"ADD_ORDER":return[].concat(Object(se.a)(e),[n]);default:return e}}}),Ne=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_e.d,De=Object(_e.e)(Re,Ne(Object(_e.a)(Pe.a)));l.a.render(r.a.createElement(O.a,{store:De},r.a.createElement(o.a,null,r.a.createElement(P,null),r.a.createElement(xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[233,1,2]]]);
//# sourceMappingURL=main.f57ee3f1.chunk.js.map